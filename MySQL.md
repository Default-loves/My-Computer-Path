### MySQL架构
![image](https://github.com/Default-loves/My-Computer-Path/blob/master/pic/MySQL/MySQL%E6%9E%B6%E6%9E%84%E7%A4%BA%E6%84%8F%E5%9B%BE.png)
#### 连接器
- 连接器用于和客户端建立连接，获取登陆用户的权限，维持和管理连接
- 建立连接后，使用的权限将固定下来
- 对于长连接，由于查询过程中临时使用的内存管理于连接对象中，只有断开连接的时候才释放内存资源，所以如果连接长时间保持，则内存占用大，对此，有两种解决方法：
1. 定期断开连接，或者程序里面判断如果操作了一个占用内存的大查询后，断开连接，之后要查询的时候重新连接
2. 在每次执行完一次大查询后，执行`mysql_reset_connection`来重新初始化连接，这个过程不需要重新获取权限和重连，只是将连接恢复到原始的状态

#### 分析器
包括词法分析，语法分析

#### 优化器
在表里面有多个索引的时候，决定使用哪个索引更快，或者在多表连接join的时候，决定表的连接顺序，优化器的目的是对于多个索引，找到执行代价最小的方案去执行，影响执行代价的元素包括：扫描行数、是否涉及到临时表和排序等

#### 执行器
首先判断对表是否有执行的权限，如果没有操作权限就报错，之后调用存储引擎接口来进行操作，在数据库的慢查询日志中有rows_examined字段，表示了语句执行过程中执行器调用存储引擎获取数据行的时候累加的